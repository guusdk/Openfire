ALTER TABLE ofMucService ADD (privateKey VARCHAR2(255));

UPDATE ofMucService SET privateKey = (
    SELECT
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1) ||
        SUBSTR('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', FLOOR(DBMS_RANDOM.VALUE(1, 63)), 1)
    FROM dual
);

ALTER TABLE ofMucService MODIFY (privateKey VARCHAR2(255) NOT NULL);

UPDATE ofVersion SET version = 38 WHERE name = 'openfire';

COMMIT;
